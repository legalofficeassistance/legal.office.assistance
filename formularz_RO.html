<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formular – Date despre închisoare</title>

<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; margin:0; padding:0; }
.container { max-width:700px; margin:20px auto; background:#fff; padding:20px; border-radius:6px; }
h2{ margin-top:0; }
.step{ display:none; }
.step.active{ display:block; }
label{ display:block; margin-top:12px; font-weight:bold; }
input, textarea, select{ width:100%; padding:8px; margin-top:4px; }
textarea{ min-height:80px; }
.buttons{ margin-top:20px; display:flex; justify-content:space-between; flex-wrap:wrap; gap:10px; }
button{ padding:10px 16px; cursor:pointer; }
.progress{ height:8px; background:#ddd; border-radius:4px; margin-bottom:20px; }
.progress-bar{ height:8px; background:#4caf50; width:0%; border-radius:4px; }
.box{ border:1px solid #ccc; padding:12px; margin-top:15px; border-radius:4px; }
.preview{ background:#f9f9f9; padding:10px; white-space:pre-wrap; }
</style>
</head>

<body>
<div class="container">

<div class="progress">
  <div class="progress-bar" id="progressBar"></div>
</div>

<form id="form">

<!-- STEP 1 -->
<div class="step active">
<h2>Date personale</h2>
<label>Prenume</label><input name="Prenume">
<label>Nume de familie</label><input name="Nume">
<label>Perioada de detenție (de – până)</label><input type="date" name="Perioada de la"><input type="date" name="Perioada pana">
<label>Adresă</label><textarea name="Adresa"></textarea>
</div>

<!-- STEP 2 -->
<div class="step">
<h2>Contact și identificare</h2>
<label>Număr de telefon</label><input name="Telefon">
<label>Email</label><input type="email" name="Email">
<label>Cod fiscal în Slovenia (Davčna številka)</label><input name="NIP">
<label>Număr de identificare personal EMŠO</label><input name="EMSO">
</div>

<!-- STEP 3 -->
<div class="step">
<h2>Informații despre caz</h2>
<label>Număr dosar</label><input name="Dosar">
<label>Data sentinței</label><input type="date" name="Data Sentintei">
<label>Orașul instanței</label><input name="Oras Instanta">
</div>

<!-- STEP 4 -->
<div class="step">
<h2>Limba și drepturi</h2>
<label>Limba înțeleasă</label><input name="Limba">
<label>Ați primit regulamentul închisorii într-o limbă pe care o înțelegeți?</label>
<select name="Regulament"><option>DA</option><option>NU</option></select>
<label>Observații suplimentare</label><textarea name="Observatii"></textarea>
</div>

<!-- STEP 5 -->
<div class="step">
<h2>Închisori și celule</h2>
<div id="prisons"></div>
<button type="button" onclick="addPrison()">+ Adaugă altă închisoare</button>
</div>

<!-- STEP 6 -->
<div class="step">
<h2>Previzualizare</h2>
<div class="preview" id="preview"></div>
<label><input type="checkbox" required> Confirm că datele furnizate sunt corecte</label>
</div>

<div class="buttons">
<button type="button" onclick="prev()">Înapoi</button>
<button type="button" onclick="next()">Următor</button>
</div>

<div class="buttons">
<button type="button" onclick="window.print()">Tipărește / Salvează ca PDF</button>
<button type="button" onclick="downloadTXT()">Descarcă fișier</button>
<button type="button" onclick="copyText()">Copiază textul</button>
</div>

</form>
</div>

<script>
let step=0; const steps=document.querySelectorAll('.step');
function showStep(){steps.forEach((s,i)=>s.classList.toggle('active',i===step));document.getElementById('progressBar').style.width=((step+1)/steps.length*100)+'%'; if(step===steps.length-1) buildPreview();}
function next(){if(step<steps.length-1) step++; showStep();}
function prev(){if(step>0) step--; showStep();}
function addPrison(){const div=document.createElement('div'); div.className='box'; div.innerHTML=`
<h3>Închisoare</h3>
<label>Nume / oraș</label><input name="Inchisoare">
<label>Număr celulă</label><input name="Celula">
<label>Număr de persoane în celulă</label><input name="Persoane">
<label>Suprafață aproximativă</label><input name="Suprafata">
<label>Descrierea aranjamentului celulei</label><textarea name="Schema"></textarea>
`; document.getElementById('prisons').appendChild(div);}
function buildPreview(){const data=new FormData(document.getElementById('form')); let text=''; for(let [k,v] of data.entries()){text+=k+': '+v+'\n';} document.getElementById('preview').textContent=text;}
showStep();
function downloadTXT(){const text=document.getElementById("preview").textContent; const blob=new Blob([text],{type:"text/plain;charset=utf-8"}); const link=document.createElement("a"); link.href=URL.createObjectURL(blob); link.download="formularz_inchisoare.txt"; link.click();}
function copyText(){const text=document.getElementById("preview").textContent; navigator.clipboard.writeText(text).then(()=>{alert("Text copiat. Puteți să-l lipiți într-un email sau mesaj.");});}
</script>

</body>
</html>
