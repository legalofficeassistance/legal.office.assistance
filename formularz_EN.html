<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form – Imprisonment Data</title>

<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; margin:0; padding:0; }
.container { max-width:700px; margin:20px auto; background:#fff; padding:20px; border-radius:6px; }
h2{ margin-top:0; }
.step{ display:none; }
.step.active{ display:block; }
label{ display:block; margin-top:12px; font-weight:bold; }
input, textarea, select{ width:100%; padding:8px; margin-top:4px; }
textarea{ min-height:80px; }
.buttons{ margin-top:20px; display:flex; justify-content:space-between; flex-wrap:wrap; gap:10px; }
button{ padding:10px 16px; cursor:pointer; }
.progress{ height:8px; background:#ddd; border-radius:4px; margin-bottom:20px; }
.progress-bar{ height:8px; background:#4caf50; width:0%; border-radius:4px; }
.box{ border:1px solid #ccc; padding:12px; margin-top:15px; border-radius:4px; }
.preview{ background:#f9f9f9; padding:10px; white-space:pre-wrap; }
</style>
</head>

<body>
<div class="container">

<div class="progress">
  <div class="progress-bar" id="progressBar"></div>
</div>

<form id="form">

<!-- STEP 1 -->
<div class="step active">
<h2>Personal Information</h2>
<label>First Name</label><input name="First Name">
<label>Last Name</label><input name="Last Name">
<label>Period of imprisonment (from – to)</label><input type="date" name="Period From"><input type="date" name="Period To">
<label>Address</label><textarea name="Address"></textarea>
</div>

<!-- STEP 2 -->
<div class="step">
<h2>Contact and Identification</h2>
<label>Phone Number</label><input name="Phone">
<label>Email</label><input type="email" name="Email">
<label>Tax Number in Slovenia (Davčna številka)</label><input name="NIP">
<label>Personal Identification Number EMŠO</label><input name="EMSO">
</div>

<!-- STEP 3 -->
<div class="step">
<h2>Case Information</h2>
<label>Case Number</label><input name="Case Number">
<label>Date of Verdict</label><input type="date" name="Verdict Date">
<label>Court City</label><input name="Court City">
</div>

<!-- STEP 4 -->
<div class="step">
<h2>Language and Rights</h2>
<label>Understandable Language</label><input name="Language">
<label>Did you receive the prison regulations in a language you understand?</label>
<select name="Regulations"><option>YES</option><option>NO</option></select>
<label>Additional Remarks</label><textarea name="Remarks"></textarea>
</div>

<!-- STEP 5 -->
<div class="step">
<h2>Prisons and Cells</h2>
<div id="prisons"></div>
<button type="button" onclick="addPrison()">+ Add Another Prison</button>
</div>

<!-- STEP 6 -->
<div class="step">
<h2>Preview</h2>
<div class="preview" id="preview"></div>
<label><input type="checkbox" required> I confirm that the data provided is correct</label>
</div>

<div class="buttons">
<button type="button" onclick="prev()">Back</button>
<button type="button" onclick="next()">Next</button>
</div>

<div class="buttons">
<button type="button" onclick="window.print()">Print / Save as PDF</button>
<button type="button" onclick="downloadTXT()">Download File</button>
<button type="button" onclick="copyText()">Copy Text</button>
</div>

</form>
</div>

<script>
let step=0; const steps=document.querySelectorAll('.step');
function showStep(){steps.forEach((s,i)=>s.classList.toggle('active',i===step));document.getElementById('progressBar').style.width=((step+1)/steps.length*100)+'%'; if(step===steps.length-1) buildPreview();}
function next(){if(step<steps.length-1) step++; showStep();}
function prev(){if(step>0) step--; showStep();}
function addPrison(){const div=document.createElement('div'); div.className='box'; div.innerHTML=`
<h3>Prison</h3>
<label>Name / City</label><input name="Prison">
<label>Cell Number</label><input name="Cell">
<label>Number of Persons in Cell</label><input name="Persons">
<label>Approximate Area</label><input name="Area">
<label>Cell Layout Description</label><textarea name="Layout"></textarea>
`; document.getElementById('prisons').appendChild(div);}
function buildPreview(){const data=new FormData(document.getElementById('form')); let text=''; for(let [k,v] of data.entries()){text+=k+': '+v+'\n';} document.getElementById('preview').textContent=text;}
showStep();
function downloadTXT(){const text=document.getElementById("preview").textContent; const blob=new Blob([text],{type:"text/plain;charset=utf-8"}); const link=document.createElement("a"); link.href=URL.createObjectURL(blob); link.download="imprisonment_form.txt"; link.click();}
function copyText(){const text=document.getElementById("preview").textContent; navigator.clipboard.writeText(text).then(()=>{alert("Text copied. You can paste it into an email or message.");});}
</script>

</body>
</html>
